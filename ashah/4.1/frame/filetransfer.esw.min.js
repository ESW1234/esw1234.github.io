window.esw.defineFeature("FileTransfer",function(e){function t(){this.createElements(),this.registerMessageHandlers()}t.prototype.registerMessageHandlers=function(){e.addMessageHandler("fileTransfer.openFileSelector",function(){this.openFileSelector()}.bind(this)),e.addMessageHandler("fileTransfer.uploadFile",function(e,t){this.uploadFile(t)}.bind(this)),e.addMessageHandler("fileTransfer.resetFileSelector",function(){this.resetFileSelector()}.bind(this))},t.prototype.openFileSelector=function(){document.getElementById("fileSelector").click()},t.prototype.handleFileSelectorChange=function(){var t=document.getElementById("fileSelector").files[0];parent.postMessage({method:"liveagent.fileTransfer.recieveFileTransfer",data:{name:t.name,size:t.size}},e.parentOrigin)},t.prototype.uploadFile=function(e){var t=document.getElementById("fileUploadForm");t.action=e.url,t.submit(),this.resetFileSelector()},t.prototype.resetFileSelector=function(){document.getElementById("fileSelector").value=""},t.prototype.createElements=function(){var e=document.createElement("form"),t=document.createElement("input"),n=document.createElement("input"),i=document.createElement("iframe");e.id="fileUploadForm",e.enctype="multipart/form-data",e.method="post",e.target="fileUploadIframe",t.type="file",t.id="fileSelector",t.name="file",t.onchange=this.handleFileSelectorChange,n.name="filename",i.id="fileUploadIframe",i.name="fileUploadIframe",i.title="FileUploadFrame",e.appendChild(t),e.appendChild(n),document.body.appendChild(e),document.body.appendChild(i)},e.fileTransferAPI=new t});